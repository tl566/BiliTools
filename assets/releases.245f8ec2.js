import{r as v,W as I,f as ae,l as z,u as f,n as oe,a1 as re}from"./app.c07b52b4.js";import{b as E,c as ne,u as le,d as se,e as S}from"./index.38faffb3.js";const ie=E?window:void 0;E&&window.document;E&&window.navigator;E&&window.location;const U=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},W="__vueuse_ssr_handlers__";U[W]=U[W]||{};U[W];var ue=Object.defineProperty,fe=Object.defineProperties,ce=Object.getOwnPropertyDescriptors,Q=Object.getOwnPropertySymbols,de=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable,R=(e,t,r)=>t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,l=(e,t)=>{for(var r in t||(t={}))de.call(t,r)&&R(e,r,t[r]);if(Q)for(var r of Q(t))pe.call(t,r)&&R(e,r,t[r]);return e},w=(e,t)=>fe(e,ce(t));const he={json:"application/json",text:"text/plain",formData:"multipart/form-data"};function X(e){return ne(e,"immediate","refetch","initialData","timeout","beforeFetch","afterFetch","onFetchError","fetch")}function G(e){return e instanceof Headers?Object.fromEntries([...e.entries()]):e}function ve(e,...t){var r;const j=typeof AbortController=="function";let _={},a={immediate:!0,refetch:!1,timeout:0};const o={method:"GET",type:"text",payload:void 0};t.length>0&&(X(t[0])?a=l(l({},a),t[0]):_=t[0]),t.length>1&&X(t[1])&&(a=l(l({},a),t[1]));const{fetch:B=(r=ie)==null?void 0:r.fetch,initialData:Z,timeout:J}=a,L=S(),M=S(),K=S(),N=v(!1),y=v(!1),D=v(!1),m=v(null),x=I(null),$=I(null),C=I(Z),ee=ae(()=>j&&y.value);let h,b;const V=()=>{j&&h&&h.abort()},A=s=>{y.value=s,N.value=!s};J&&(b=le(V,J,{immediate:!1}));const g=async(s=!1)=>{var i;A(!0),$.value=null,m.value=null,D.value=!1,h=void 0,j&&(h=new AbortController,h.signal.onabort=()=>D.value=!0,_=w(l({},_),{signal:h.signal}));const u={method:o.method,headers:{}};if(o.payload){const F=G(u.headers);o.payloadType&&(F["Content-Type"]=(i=he[o.payloadType])!=null?i:o.payloadType),u.body=o.payloadType==="json"?JSON.stringify(f(o.payload)):f(o.payload)}let P=!1;const d={url:f(e),options:l(l({},u),_),cancel:()=>{P=!0}};if(a.beforeFetch&&Object.assign(d,await a.beforeFetch(d)),P||!B)return A(!1),Promise.resolve(null);let p=null;return b&&b.start(),new Promise((F,te)=>{var k;B(d.url,w(l(l({},u),d.options),{headers:l(l({},G(u.headers)),G((k=d.options)==null?void 0:k.headers))})).then(async n=>{if(x.value=n,m.value=n.status,p=await n[o.type](),a.afterFetch&&m.value>=200&&m.value<300&&({data:p}=await a.afterFetch({data:p,response:n})),C.value=p,!n.ok)throw new Error(n.statusText);return L.trigger(n),F(n)}).catch(async n=>{let q=n.message||n.name;return a.onFetchError&&({data:p,error:q}=await a.onFetchError({data:p,error:n,response:x.value})),C.value=p,$.value=q,M.trigger(n),s?te(n):F(null)}).finally(()=>{A(!1),b&&b.stop(),K.trigger(null)})})};z(()=>[f(e),f(a.refetch)],()=>f(a.refetch)&&g(),{deep:!0});const T={isFinished:N,statusCode:m,response:x,error:$,data:C,isFetching:y,canAbort:ee,aborted:D,abort:V,execute:g,onFetchResponse:L.on,onFetchError:M.on,onFetchFinally:K.on,get:c("GET"),put:c("PUT"),post:c("POST"),delete:c("DELETE"),patch:c("PATCH"),head:c("HEAD"),options:c("OPTIONS"),json:O("json"),text:O("text"),blob:O("blob"),arrayBuffer:O("arrayBuffer"),formData:O("formData")};function c(s){return(i,u)=>{if(!y.value)return o.method=s,o.payload=i,o.payloadType=u,oe(o.payload)&&z(()=>[f(o.payload),f(a.refetch)],()=>f(a.refetch)&&g(),{deep:!0}),!u&&f(i)&&Object.getPrototypeOf(f(i))===Object.prototype&&(o.payloadType="json"),w(l({},T),{then(P,d){return H().then(P,d)}})}}function H(){return new Promise((s,i)=>{se(N).toBe(!0).then(()=>s(T)).catch(u=>i(u))})}function O(s){return()=>{if(!y.value)return o.type=s,w(l({},T),{then(i,u){return H().then(i,u)}})}}return a.immediate&&setTimeout(g,0),w(l({},T),{then(s,i){return H().then(s,i)}})}var Y;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(Y||(Y={}));const be=re("releases",()=>{const e=v("v0.5.0"),t=v(!1);return ve("https://btdocs.vercel.app/api/releases").then(({data:r})=>{e.value=JSON.parse(r.value).data.tag_name||e.value,t.value=!0}),{tagName:e,isRefreshed:t}});export{be as u};
